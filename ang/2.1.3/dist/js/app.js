"use strict";angular.module("WaitstaffApp",["ngRoute"]),angular.module("WaitstaffApp").run(["$rootScope","$location",function(a,t){a.$on("$routeChangeError",function(){t.path("/error")}),a.defaultEarnings={tipTotal:0,mealCount:0},a.earnings=angular.copy(a.defaultEarnings)}]),angular.module("WaitstaffApp").config(["$routeProvider",function(a){a.when("/",{templateUrl:"partials/home.html"}).when("/new-meal",{templateUrl:"partials/new-meal.html",controller:"NewMealCtrl"}).when("/my-earnings",{templateUrl:"partials/my-earnings.html",controller:"EarningsCtrl"}).when("/error",{template:"<p>Error - Page Not Found</p>"}).otherwise("/error")}]),angular.module("WaitstaffApp").controller("NewMealCtrl",["$rootScope","$scope",function(a,t){t.submitted=!1,t.showError=!1;var e={basePrice:0,taxRate:0,tipRate:0,taxTotal:0,tipTotal:0,subTotal:0,total:0};t.charges=angular.copy(e),t.submit=function(){return t.mealDetailsForm.$valid?(o(),t.charges.basePrice=t.data.basePrice,t.charges.taxRate=t.data.taxRate/100,t.charges.tipRate=t.data.tipRate/100,r(),n(),void t.resetDetails()):void(t.showError=!0)},t.resetDetails=function(){t.submitted=!1,t.showError=!1,t.data="",t.mealDetailsForm.$setPristine()};var r=function(){t.charges.taxTotal=t.charges.basePrice*t.charges.taxRate,t.charges.subTotal=t.charges.basePrice+t.charges.taxTotal,t.charges.tipTotal=t.charges.subTotal*t.charges.tipRate,t.charges.total=t.charges.subTotal+t.charges.tipTotal},o=function(){t.charges=angular.copy(e)},n=function(){a.earnings.tipTotal+=t.charges.tipTotal,a.earnings.mealCount++}}]),angular.module("WaitstaffApp").controller("EarningsCtrl",["$rootScope","$scope",function(a,t){t.refresh=function(){e()};var e=function(){a.earnings=angular.copy(a.defaultEarnings)};t.calculateAverage=function(a,t){return t>0?a/t:0}}]);